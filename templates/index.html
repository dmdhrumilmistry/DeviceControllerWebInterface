{% extends 'base.html'%}

{%block container%}

<nav class="navbar navbar-expand-lg navbar-dark bg-dark " style="padding: 30px;">
    <div class="container-fluid">
        <a class="navbar-brand fw-bold fs-3" href="/">Devices Controller</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <ul class="navbar-nav mr-auto">
            <li class="nav-item ">
                <a class="nav-link fs-5 " href="/logout">
                    <button class="btn btn-outline-success" type="button">Logout</button>
                </a>
            </li>
            <li class="nav-item ">
                <a class="nav-link h5 mb-6" href="/">

                </a>
            </li>
        </ul>

    </div>
</nav>

<p>
<div class="text-center text-success text-wrap h5 mb-6"> Logged in as {{request.user}}</div>
</p>


<form method="post" action="/update">
    {%csrf_token%}

    <div class="container-fluid" style="padding: 15px;">
        <div class="container px-4 px-lg-5 mt-5">
            <div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">

                {% for device in devices %}
                <div class="col mb-5">

                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title">{{device.name}}</h5>
                            <p class="card-text"></p>
                            {%if device.state%}
                            <input class="form-check-input" type="checkbox" checked id="{{device.name}}_state"
                                name="{{device.name}}" class="form-control">
                            {%else%}
                            <input class="form-check-input" type="checkbox" id="{{device.name}}_state"
                                name="{{device.name}}" class="form-control">
                            {%endif%}
                        </div>
                    </div>

                </div>
                {%endfor%}

            </div>
        </div>
    </div>

    <div style="padding: 50px;" class="text-center">

        <button type="submit" class="btn btn-primary center-block" style="align-self: center;">Update Changes</button>

    </div>

</form>

{%endblock%}